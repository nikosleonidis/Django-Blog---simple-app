from django.shortcuts import render, redirectfrom django.contrib import messagesfrom .forms import UserRegisterForm, UserLoginForm, ProfileUpdateForm, UserUpdateFormfrom django.contrib.auth.decorators import login_requireddef register(request):    if request.method == "POST":        form = UserRegisterForm(request.POST)        if form.is_valid():            form.save()            username = form.cleaned_data.get('username')            messages.success(request,                             f'Аккаунт успешно зарегистрирован для {username} Авторизуйтесь прямо сейчас!')            return redirect('login')    else:        form = UserRegisterForm()    return render(request, 'register.html', {'form': form})def login(request):    if request.method == "GET":        form = UserLoginForm(request.POST)        if form.is_valid():            form.save()            username = form.cleaned_data.get('username')            if request.method == "True":                messages.success(request, f'{username}, пробуем авторизоваться...')                return redirect('home')            else:                messages.error(request, f'Неверное имя пользователя')                return redirect('register')@login_requireddef profile(request):    return render(request, 'profile.html')@login_requireddef profile_update(request):    if request.method == 'POST':        u_form = UserUpdateForm(request.POST, instance=request.user)        p_form = ProfileUpdateForm(request.POST,                                   request.FILES,                                   instance=request.user.profile)        if u_form.is_valid() and p_form.is_valid():            u_form.save()            p_form.save()            messages.success(request, f'Ваш аккаунт успешно отредактирован')            return redirect('profile')    else:        u_form = UserUpdateForm(instance=request.user)        p_form = ProfileUpdateForm(instance=request.user.profile)    context = {        "u_form": u_form,        "p_form": p_form    }    return render(request, 'profile_update.html', context)